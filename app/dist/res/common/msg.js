define(["jquery"],function(t){function s(){this.msg=null,this.mask=null,this.settings={ele:null,title:"",type:"confirm",text:"",btnOkText:"Ok",btnNoText:"Cancel",mask:!0,sure_close:!0,auto_close:!1,success:function(){},failed:function(){}}}return s.prototype.init=function(s){var e=this;t.extend(!0,e.settings,s),this.alertMsg()},s.prototype.alertMsg=function(){if(0!=t("div[name=mask]").length||0!=t("div[name=MsgDialog]").length||0!=t("div[name=loadstate]").length)return!1;var s=(t(document).height(),t(window).height()),e=t(window).scrollTop(),n=t("body"),i="<div class='mask' id='mask' name='mask' style='background:#000; opacity:0.36;display:block;overflow:hidden;position:fixed; left:0px; top:0px; width:100%; z-index:999; height:"+(s+e)+"px' ></div>",o="<div name='alertMsgDialog' class='msg' id='msg' style='position:fixed; z-index:1000;'></div>";switch(this.settings.mask&&n.append(i),n.append(o),this.msg=t("#msg"),this.mask=t("#mask"),this.settings.type){case"confirm":this.confirm();break;case"alert":this._alert();break;default:this._text()}},s.prototype.setstyle=function(){var s=(this.msg.width(),this.msg.height());this.msg.width(t(window).width()-20).css({top:(t(window).height()-s)/2})},s.prototype._success=function(){var t=this;t.msg.find(".btnok").on("click",function(s){var s=s||window.event;s.stopPropagation?s.stopPropagation():s.cancelBulle=!0,t.settings.success&&"function"==typeof t.settings.success&&t.settings.success(t.msg,t.mask),t.settings.sure_close&&setTimeout(function(){t._hide()},300)})},s.prototype._sure=function(){var t=this;t.msg.find(".sure").on("click",function(s){var s=s||window.event;s.stopPropagation?s.stopPropagation():s.cancelBulle=!0,t.settings.success&&"function"==typeof t.settings.success&&t.settings.success(t.msg,t.mask),setTimeout(function(){t._hide()},300)})},s.prototype._failed=function(){var t=this;t.msg.find(".btnno").on("click",function(s){var s=s||window.event;s.stopPropagation?s.stopPropagation():s.cancelBulle=!0,t.settings.failed&&"function"==typeof t.settings.failed&&t.settings.failed(t.msg,t.mask,t._hide),setTimeout(function(){t._hide()},300)})},s.prototype.confirm=function(){var t="<div class='msg-content'><p>"+this.settings.text+"</p></div><div class='msg-btn'><button type='button'class='btnok' >"+this.settings.btnOkText+"</button><button type='button' class='btnno'>"+this.settings.btnNoText+"</button></div>";this.msg.append(t),this.setstyle(),this._success(),this._failed()},s.prototype._alert=function(){var t="<div class='msg-content'><p>"+this.settings.text+"</p></div><div class='msg-btn'><button type='button' class='sure'>"+this.settings.btnOkText+"</button></div>";this.msg.append(t),this.setstyle(),this._sure()},s.prototype._text=function(){var t="<div class='msg-header'>"+this.settings.title+"</div><div class='msg-content'><input type='text' value='' class='set-text' ></div><div class='msg-btn'><button type='button'class='btnok' >"+this.settings.btnOkText+"</button><button type='button' class='btnno'>"+optthis.settingsions.btnNoText+"</button></div>";this.msg.append(t),this.setstyle(),this._success(),this._failed(),this._text_box()},s.prototype._text_box=function(){var s=this;t(window).keydown(function(t){13==t.keyCode&&(s.settings.success&&"function"==typeof s.settings.success&&options.sucess(s.msg,s.mask),setTimeout(function(){s._hide()},300))})},s.prototype._hide=function(){this.mask.remove(),this.msg.remove(),this.canmove()},s.prototype.nomove=function(){var t=this;document.addEventListener("touchmove",function(s){t.move(s)},!1),bd.eq(0).css("overflow","hidden")},s.prototype.move=function(t){var s=s||window.event;s.preventDefault(),s.cancelBubble=!0},s.prototype.canmove=function(){var s=this;document.removeEventListener("touchmove",function(t){s.move(t)},!1),t("body").eq(0).css("overflow","auto")},t.extend({msg:function(t){var e=new s;return e.init(t)}}),{msg:s}});