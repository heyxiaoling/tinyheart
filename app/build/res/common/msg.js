define(["jquery"],function(e){function t(){this.msg=null,this.mask=null,this.settings={ele:null,title:"",type:"confirm",text:"",btnOkText:"Ok",btnNoText:"Cancel",mask:!0,sure_close:!0,auto_close:!1,success:function(){},failed:function(){}}}return t.prototype.init=function(t){var n=this;e.extend(!0,n.settings,t),this.alertMsg()},t.prototype.alertMsg=function(){if(e("div[name=mask]").length!=0||e("div[name=MsgDialog]").length!=0||e("div[name=loadstate]").length!=0)return!1;var t=e(document).height(),n=e(window).height(),r=e(window).scrollTop(),i=e("body"),s="<div class='mask' id='mask' name='mask' style='background:#000; opacity:0.36;display:block;overflow:hidden;position:fixed; left:0px; top:0px; width:100%; z-index:999; height:"+(n+r)+"px' ></div>",o="<div name='alertMsgDialog' class='msg' id='msg' style='position:fixed; z-index:1000;'></div>";this.settings.mask&&i.append(s),i.append(o),this.msg=e("#msg"),this.mask=e("#mask");switch(this.settings.type){case"confirm":this.confirm();break;case"alert":this._alert();break;default:this._text()}},t.prototype.setstyle=function(){var t=this.msg.width(),n=this.msg.height();this.msg.width(e(window).width()-20).css({top:(e(window).height()-n)/2})},t.prototype._success=function(){var e=this;e.msg.find(".btnok").on("click",function(t){var t=t||window.event;t.stopPropagation?t.stopPropagation():t.cancelBulle=!0,e.settings.success&&typeof e.settings.success=="function"&&e.settings.success(e.msg,e.mask),e.settings.sure_close&&setTimeout(function(){e._hide()},300)})},t.prototype._sure=function(){var e=this;e.msg.find(".sure").on("click",function(t){var t=t||window.event;t.stopPropagation?t.stopPropagation():t.cancelBulle=!0,e.settings.success&&typeof e.settings.success=="function"&&e.settings.success(e.msg,e.mask),setTimeout(function(){e._hide()},300)})},t.prototype._failed=function(){var e=this;e.msg.find(".btnno").on("click",function(t){var t=t||window.event;t.stopPropagation?t.stopPropagation():t.cancelBulle=!0,e.settings.failed&&typeof e.settings.failed=="function"&&e.settings.failed(e.msg,e.mask,e._hide),setTimeout(function(){e._hide()},300)})},t.prototype.confirm=function(){var e="<div class='msg-content'><p>"+this.settings.text+"</p></div>"+"<div class='msg-btn'><button type='button'class='btnok' >"+this.settings.btnOkText+"</button><button type='button' class='btnno'>"+this.settings.btnNoText+"</button></div>";this.msg.append(e),this.setstyle(),this._success(),this._failed()},t.prototype._alert=function(){var e="<div class='msg-content'><p>"+this.settings.text+"</p></div><div class='msg-btn'><button type='button' class='sure'>"+this.settings.btnOkText+"</button></div>";this.msg.append(e),this.setstyle(),this._sure()},t.prototype._text=function(){var e="<div class='msg-header'>"+this.settings.title+"</div><div class='msg-content'><input type='text' value='' class='set-text' ></div>"+"<div class='msg-btn'><button type='button'class='btnok' >"+this.settings.btnOkText+"</button><button type='button' class='btnno'>"+optthis.settingsions.btnNoText+"</button></div>";this.msg.append(e),this.setstyle(),this._success(),this._failed(),this._text_box()},t.prototype._text_box=function(){var t=this;e(window).keydown(function(e){e.keyCode==13&&(t.settings.success&&typeof t.settings.success=="function"&&options.sucess(t.msg,t.mask),setTimeout(function(){t._hide()},300))})},t.prototype._hide=function(){this.mask.remove(),this.msg.remove(),this.canmove()},t.prototype.nomove=function(){var e=this;document.addEventListener("touchmove",function(t){e.move(t)},!1),bd.eq(0).css("overflow","hidden")},t.prototype.move=function(e){var t=t||window.event;t.preventDefault(),t.cancelBubble=!0},t.prototype.canmove=function(){var t=this;document.removeEventListener("touchmove",function(e){t.move(e)},!1),e("body").eq(0).css("overflow","auto")},e.extend({msg:function(e){var n=new t;return n.init(e)}}),{msg:t}});